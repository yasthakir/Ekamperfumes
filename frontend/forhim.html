<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aurora Perfumes – For Him Collection</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
<style>
/* --- BASE STYLES FROM INDEX.HTML (COPIED FOR CONSISTENCY) --- */
:root{
  --primary:#caa97a;
  --secondary:#e6d2b2;
  --bg:#fdfbf7;
  --card:#fff;
  --muted:#7b6f6a;
  --strong-dark: #1f2730; /* New Dark color for the Masculine Hero */
  --glass: rgba(255,255,255,0.35);
  --shadow:0 10px 25px rgba(0,0,0,0.08);
  --accent-glow: rgba(202,169,122,0.35);
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Poppins',sans-serif;background:var(--bg);color:#222;overflow-x:hidden;}
a{text-decoration:none;color:inherit;}
.container{max-width:1300px;margin:0 auto;padding:20px;}

/* Header (Desktop Default) */
header{
  position:sticky;top:0;z-index:1000;display:flex;justify-content:space-between;align-items:center;padding:15px 30px;
  backdrop-filter:blur(14px);background:var(--glass);border-radius:16px;box-shadow:0 12px 30px rgba(0,0,0,0.1);
  transition:all 0.3s ease;
}
header:hover{background:rgba(255,255,255,0.55);}
.brand{display:flex;align-items:center;gap:15px;}
.logo{font-family:'Playfair Display';font-weight:700;font-size:28px;color:white;
background:linear-gradient(135deg,var(--primary),var(--secondary));padding:12px;border-radius:14px;box-shadow:0 8px 22px rgba(0,0,0,0.1);
animation:logoGlow 3s ease-in-out infinite alternate;text-align:center;width:50px;height:50px;display:flex;justify-content:center;align-items:center;}
@keyframes logoGlow{0%{box-shadow:0 0 10px var(--primary);}50%{box-shadow:0 0 18px var(--secondary);}100%{box-shadow:0 0 10px var(--primary);}}
nav{display:flex;gap:22px;}
nav a{position:relative;font-weight:500;color:var(--muted);transition:all .3s;}
nav a::after{content:'';position:absolute;left:0;bottom:-3px;width:0;height:2px;background:var(--primary);transition:width .3s;}
nav a:hover::after{width:100%;}
.icon-btn{background:rgba(255,255,255,0.2);border:none;padding:6px 10px;border-radius:12px;cursor:pointer;transition:.3s;font-size:18px;}
.icon-btn:hover{transform:scale(1.2);background:rgba(255,255,255,0.35);}
#hamburger{display:none;font-size:26px;background:transparent;border:none;cursor:pointer;}
.nav-close-btn{display: none;}
/* === MOBILE NAV MENU FIX: Hamburger Left, Logo Center, Menu Slide from Left === */
@media(max-width:768px){
  header { 
    padding: 15px 20px;
    position: sticky; 
    justify-content: space-between;
  }
  .brand {
    position: absolute; 
    left: 50%;
    transform: translateX(-50%);
    z-index: 1001; 
  }
  .actions { order: 3; }
  #hamburger { 
    display: block;
    order: 1; 
    z-index: 1001; 
  }
  nav{
    display:none;
    flex-direction:column;
    gap:12px;
    position:fixed; 
    top: 0; 
    left: -100%; 
    right: auto; 
    width: 70%; 
    height: 100vh; 
    background:rgba(255,255,255,0.9); 
    padding: 80px 20px 20px; 
    border-radius: 0 16px 16px 0; 
    backdrop-filter:blur(12px);
    box-shadow: 10px 0 30px rgba(0,0,0,0.2); 
    z-index: 1002; 
    transition: left 0.3s ease-in-out; 
  }
  nav.show{
    display:flex;
    left: 0; 
  }
  .nav-close-btn {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 32px;
    color: var(--muted);
    background: transparent;
    border: none;
    cursor: pointer;
  }
}

/* ========== Search Section Below Header ========== */
.search-section {
  width: 100%;
  background: #f5f5f5;
  padding: 15px 0;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.search-section .container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.search-bar {
  display: flex;
  align-items: center;
  max-width: 500px;
  margin: 0 auto;
}

.search-bar input {
  flex: 1;
  padding: 10px 14px;
  border: 1px solid #ccc;
  border-radius: 8px 0 0 8px;
  outline: none;
}

.search-bar button {
  padding: 10px 14px;
  border: none;
  background: #111;
  color: white;
  border-radius: 0 8px 8px 0;
  cursor: pointer;
  transition: 0.3s;
}

.search-bar button:hover {
  background: #333;
}

/* --- Products and Filter Grid Styles --- */
.filter-section {
    display:flex;
    flex-wrap:wrap;
    justify-content:space-between;
    align-items:center;
    gap:15px;
    padding:15px 20px;
    background:#fff;
    border-radius:12px;
    box-shadow:0 6px 20px rgba(0,0,0,0.05);
    margin-bottom:30px;
}
.filter-group {
    display:flex;
    align-items:center;
    gap:6px;
    white-space:nowrap;
}
.filter-group label {
    font-weight:600;
    font-size:14px;
    color:var(--muted);
}
.filter-group select {
    padding:8px 12px;
    border-radius:8px;
    border:1px solid #ddd;
    background:#fff;
    cursor:pointer;
    font-weight:500;
    transition:.3s;
}
.filter-group select:focus {
    border-color:var(--primary);
    box-shadow:0 0 8px rgba(202,169,122,0.3);
    outline:none;
}

.products-grid {
    /* DEFAULT: 4 columns for Desktop (> 1024px) */
    display:grid;
    grid-template-columns:repeat(4, 1fr); 
    gap:20px;
}

.product-card-grid {
    background:#fff;
    border-radius:16px;
    padding:15px;
    text-align:center;
    box-shadow:0 6px 20px rgba(0,0,0,0.05);
    transition:.3s;
}
.product-card-grid:hover {
    transform:translateY(-5px);
    box-shadow:0 12px 25px rgba(0,0,0,0.1);
}
.product-card-grid img {
    width:100%;
    height:150px;
    object-fit:cover;
    border-radius:12px;
    margin-bottom:12px;
}
.product-card-grid h4 {font-size:16px;margin:8px 0;font-weight:600;}
.product-card-grid .price {font-weight:700;color:#333;margin-bottom:12px;}
.product-card-grid .add-cart {
    padding:8px 14px;
    border-radius:10px;
    border:none;
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    color:#fff;
    font-weight:600;
    cursor:pointer;
}
.product-card-grid .add-cart:hover {
    transform:translateY(-2px);
    box-shadow:0 6px 18px rgba(202,169,122,0.35);
}
.fav-btn.selected {
    color: #ff4b4b;
    border-color: #ff4b4b;
}

/* Responsive Grid */

/* 1. Tablet/Medium Screens (max-width: 1024px) -> 3 Columns */
@media(max-width:1024px) and (min-width:768px){
    .products-grid{
        grid-template-columns:repeat(3,1fr);
    }
}

/* 2. Tablet/Mobile (max-width: 768px) -> Filter Section scrollable */
@media(max-width:768px){
    .filter-section {
        flex-wrap:nowrap;
        overflow-x:auto;
        justify-content:flex-start;
        gap:12px;
        padding:12px;
        scrollbar-width:none;
    }
    .filter-section::-webkit-scrollbar {display:none;}
    
    .filter-group {
        flex-direction:column;
        align-items:flex-start;
        background:#f9f9f9;
        padding:8px 10px;
        border-radius:10px;
        flex-shrink:0;
    }
    .filter-group label {font-size:12px;}
    .filter-group select {font-size:13px;}
}

/* 3. Small Mobile Phones (max-width: 767px) -> MANDATORY 2 Columns */
@media(max-width:767px){
    .products-grid{
        grid-template-columns:repeat(2,1fr); /* Enforcing 2 columns for all mobile screens */
    }
}


/* Page Hero Section - NEW STYLES */
.page-hero {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 60px 40px;
    margin: 30px 0;
    border-radius: 20px;
    color: white; /* Text color for dark background */
    background: var(--strong-dark); /* Dark background for masculine feel */
    position: relative;
    overflow: hidden;
    box-shadow: 0 15px 40px rgba(0,0,0,0.3);
    /* GSAP Hook for 3D Tilt */
    transform-style: preserve-3d;
}

/* Particle Effect */
.hero-particles {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 0;
}
.hero-particle {
    position: absolute;
    background: rgba(255, 255, 255, 0.2);
    width: 2px;
    height: 2px;
    border-radius: 50%;
    filter: blur(0.5px);
    opacity: 0;
}

.hero-left-content {
    max-width: 60%;
    z-index: 2;
    /* GSAP Hook for 3D Tilt */
    transform: translateZ(20px);
}

.page-hero h1 {
    font-family:'Playfair Display', serif;
    font-size: clamp(2.5rem, 6vw, 4rem);
    line-height: 1.1;
    margin-bottom: 15px;
    color: var(--primary); /* Accent color for headline */
    /* GSAP Hook */
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}
.page-hero h1 span {
    display: inline-block;
    text-align: center;
}

.page-hero p {
    font-size: 1.1rem;
    line-height: 1.5;
    margin-bottom: 25px;
    color: #ccc;
    /* GSAP Hook */
    transform: translateZ(10px);
}

.hero-cta {
    padding: 12px 25px;
    background: var(--primary);
    border-radius: 12px;
    color: var(--strong-dark);
    font-weight: 700;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    /* GSAP Hook */
    transform: translateZ(15px);
}

.hero-cta:hover {
    transform: translateY(-3px) translateZ(15px);
    box-shadow: 0 8px 20px var(--accent-glow);
}

.hero-image-right {
    position: relative;
    width: 35%;
    height: 300px;
    z-index: 1;
    /* GSAP Hook for 3D Tilt */
    transform: translateZ(10px);
}

.hero-image-right img {
    position: absolute;
    bottom: -40px;
    right: 0;
    width: 100%;
    height: auto;
    max-width: 300px;
    object-fit: contain;
    filter: drop-shadow(0 15px 25px rgba(0,0,0,0.4));
    /* GSAP Hook for 3D Tilt */
    transform: translateZ(30px);
}

/* Responsive adjustments for Hero */
@media (max-width: 900px) {
    .page-hero {
        flex-direction: column;
        text-align: center;
        padding: 40px 20px;
    }
    .hero-left-content {
        max-width: 100%;
        margin-bottom: 20px;
        transform: none; /* Disable 3D tilt on small screens */
    }
    .hero-image-right {
        width: 100%;
        height: 250px;
        transform: none; /* Disable 3D tilt on small screens */
    }
    .hero-image-right img {
        position: static;
        margin: 0 auto;
        max-width: 200px;
        bottom: auto;
        transform: none; /* Disable 3D tilt on small screens */
    }
}


/* Footer Styles (Copied from index.html) */
.footer {
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(250,250,250,0.95));
  padding: 60px 20px 30px 20px;
  color: #333;
  position: relative;
  overflow: hidden;
  width: 100%;
}

.footer-container {
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 30px;
}

.footer h4 {
  font-size: 18px;
  margin-bottom: 15px;
  font-family: 'Playfair Display', serif;
}

.footer p, .footer ul li {
  font-size: 14px;
  line-height: 1.6;
  color: #555;
}

.footer ul {
  list-style: none;
  padding: 0;
}

.footer ul li {
  margin-bottom: 10px;
}

.footer ul li a {
  color: #555;
  text-decoration: none;
  transition: all 0.3s ease;
  position: relative;
}

.footer ul li a::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0%;
  height: 2px;
  background: var(--primary);
  transition: width 0.3s ease;
}

.footer ul li a:hover::after {
  width: 100%;
}

.footer ul li a:hover {
  color: var(--primary);
}

.footer-brand .logo {
  font-family: 'Playfair Display', serif;
  font-weight: 700;
  font-size: 32px;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  padding: 12px;
  border-radius: 14px;
  display: inline-block;
  color: white;
  text-align: center;
}

.footer-socials {
  display: flex;
  gap: 12px;
  margin-top: 15px;
}

.footer-socials a {
  width: 36px;
  height: 36px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--primary);
  color: white;
  border-radius: 50%;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.footer-socials a:hover {
  transform: translateY(-6px) scale(1.1);
  box-shadow: 0 8px 20px rgba(202,169,122,0.35);
}

.footer-bottom {
  margin-top: 40px;
  border-top: 1px solid #ddd;
  padding-top: 20px;
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  font-size: 13px;
  color: var(--muted);
}

/* Footer Responsive Adjustments */
@media (max-width: 900px) {
  .footer-container {
    grid-template-columns: repeat(2, 1fr); 
  }
}
@media (max-width: 600px) {
  .footer-container {
    grid-template-columns: 1fr; 
  }
  .footer-bottom {
    flex-direction: column;
    text-align: center;
    gap: 10px;
  }
}
</style>
</head>
<body>
<div class="container">
 
  <header>
    <div class="brand">
      <div class="logo">A</div>
    </div>
    <nav>
      <button class="nav-close-btn" id="navCloseBtn">&times;</button>
      <a href="index.html">Home</a>
      <a href="index.html#products">Shop</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
    </nav>
    <button id="hamburger">☰</button>

    <div class="actions">
      <a href="fav.html">
        <button class="icon-btn">♡</button>
      </a>
      <a href="cart.html">
        <button class="icon-btn">🛒</button>
      </a>
      <a href="profile.html">
        <button class="icon-btn">👤</button>
      </a>
    </div>
  </header>

  <section class="search-section">
    <div class="container">
      <div class="search-bar">
        <input type="text" placeholder="Search perfumes...">
        <button type="submit">🔍</button>
      </div>
    </div>
  </section>
  
  <section class="page-hero" id="pageHero">
    <div class="hero-particles" id="heroParticles">
      </div>
    <div class="hero-left-content">
        <h1>
            <span>The</span>
            <span>Gentleman's</span>
            <span>Collection</span>
        </h1>
        <p>Experience **Midnight Reserve**, a blend of dark wood, spices, and leather, exclusively for the modern man.</p>
        <a href="#productsGrid" class="hero-cta">Explore Scents</a>
    </div>
    <div class="hero-image-right">
        <img src="images/mens.png" alt="Masculine Perfume Bottle" id="heroBottle">
    </div>
  </section>

  <div class="filter-section">
      <div class="filter-group">
        <label for="sort">Sort By:</label>
        <select id="sort">
          <option>Popularity</option>
          <option>Newest</option>
          <option>Price: Low to High</option>
          <option>Price: High to Low</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="category">Category:</label>
        <select id="category">
          <option>All</option>
          <option>Aromatic</option>
          <option>Woody</option>
          <option>Fresh</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="columns">Columns:</label>
        <select id="columns">
          <option>4</option>
          <option>3</option>
          <option>2</option>
        </select>
      </div>
    </div>
  
    <section class="products-grid" id="productsGrid">
    </section>

</div> 
<footer class="footer">
<div class="footer-container">
  <div class="footer-brand">
    <div class="logo">A</div>
    <p>Premium handcrafted fragrances inspired by nature and elegance. Experience luxury in every scent.</p>
  </div>

  <div class="footer-links">
    <h4>Quick Links</h4>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="index.html#products">Shop</a></li>
      <li><a href="index.html#about">About</a></li>
      <li><a href="index.html#contact">Contact</a></li>
      <li><a href="#faq">FAQ</a></li>
    </ul>
  </div>

  <div class="footer-categories">
    <h4>Categories</h4>
    <ul>
      <li><a href="forhim.html">For Him</a></li>
      <li><a href="forher.html">For Her</a></li>
      <li><a href="#gifts">Gifts</a></li>
      <li><a href="#signature">Signature</a></li>
      <li><a href="#combo">Combo</a></li>
    </ul>
  </div>

  <div class="footer-contact">
    <h4>Contact Us</h4>
    <p>Email: support@auroraperfumes.com</p>
    <p>Phone: +91 98765 43210</p>
    <div class="footer-socials">
      <a href="#">🐦</a>
      <a href="#">📘</a>
      <a href="#">📸</a>
      <a href="#">🎥</a>
    </div>
  </div>
</div>

<div class="footer-bottom">
  <p>&copy; 2025 Aurora Perfumes. All rights reserved.</p>
  <p>Designed with ❤️ by YourBrand</p>
</div>
</footer>

<div id="custom-message" style="display:none; position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#333; color:white; padding:10px 20px; border-radius:10px; z-index:2000; box-shadow:0 4px 12px rgba(0,0,0,0.3); font-size: 14px; opacity:0; pointer-events: none;"></div>

<script>
  const API_URL = 'https://ekamperfumes-production.up.railway.app/api';
    const GENDER_FILTER = 'Men'; // Hardcoded filter for this page
    const imageBaseUrl = 'https://ekamperfumes-production.up.railway.app';
    let allProducts = []; 

    // Custom message box replacement for alert()
    function showMessage(message) {
        const msgBox = document.getElementById('custom-message');
        if (!msgBox) return;
        msgBox.textContent = message;
        msgBox.style.display = 'block';
        
        gsap.fromTo(msgBox, {y: 20, autoAlpha: 0}, {y: 0, autoAlpha: 1, duration: 0.3});
        
        clearTimeout(window.msgTimeout);
        window.msgTimeout = setTimeout(() => {
            gsap.to(msgBox, {y: 20, autoAlpha: 0, duration: 0.3, onComplete: () => {
                 msgBox.style.display = 'none';
            }});
        }, 3000);
    }
    
    // --- Common Functions ---
    function addToCart(product) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const existingProductIndex = cart.findIndex(item => item.id === product._id);

        const cartItem = {
            id: product._id,
            name: product.name,
            price: product.price,
            img: `${imageBaseUrl}${product.image}`, 
            qty: 1
        };

        if (existingProductIndex > -1) {
            cart[existingProductIndex].qty = (cart[existingProductIndex].qty || 1) + 1;
        } else {
            cart.push(cartItem);
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        showMessage(`${product.name} added to cart!`); 
    }

    function toggleFavoriteStatus(product, favBtn) {
        let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
        const existingProductIndex = favorites.findIndex(item => item.id === product._id);
        
        const favItem = {
            id: product._id,
            name: product.name,
            price: product.price,
            img: `${imageBaseUrl}${product.image}`, 
        };

        if (existingProductIndex > -1) {
            favorites.splice(existingProductIndex, 1);
            favBtn.classList.remove('selected');
        } else {
            favorites.push(favItem);
            favBtn.classList.add('selected');
        }

        localStorage.setItem("favorites", JSON.stringify(favorites));
        showMessage(`Toggled favorite status for ${product.name}`); 
    }
    
    function openProductView(productId) {
        if (!productId) {
            console.error("Invalid Product ID!");
            return;
        }
        localStorage.setItem('productId', productId);
        window.location.href = 'product.html';
    }
    
    // --- Rendering and Filtering ---
    function renderProducts(products, containerId) {
        const container = document.getElementById(containerId);
        if (!container) return;
        
        const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
        container.innerHTML = '';

        products.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card-grid';

            const isFavorite = favorites.some(item => item.id === product._id);

            card.innerHTML = `
                <img src="${imageBaseUrl}${product.image}" alt="${product.name}" onerror="this.onerror=null;this.src='https://placehold.co/150x150/7b6f6a/ffffff?text=For+Him'">
                <h4>${product.name}</h4>
                <p class="price">₹${product.price}</p>
                <div style="display: flex; gap: 8px; justify-content: center; align-items: center; padding: 0 10px;">
                    <button class="add-cart" style="flex-grow: 1;">Add to Cart</button>
                    <button class="fav-btn ${isFavorite ? 'selected' : ''}" style="background: white; border: 1px solid #ddd; border-radius: 10px; padding: 8px 12px; font-size: 16px; cursor: pointer; line-height: 1;">♡</button>
                </div>
            `;

            card.addEventListener('click', () => openProductView(product._id));
            
            const cartBtn = card.querySelector('.add-cart');
            const favBtn = card.querySelector('.fav-btn');

            if (cartBtn) {
                cartBtn.addEventListener('click', (event) => {
                    event.stopPropagation();
                    addToCart(product);
                });
            }

            if (favBtn) {
                favBtn.addEventListener('click', (event) => {
                    event.stopPropagation();
                    toggleFavoriteStatus(product, favBtn);
                });
            }
            
            container.appendChild(card);
        });
        
        // Removed initial column style setting here to rely on CSS. 
        // Logic moved to applyFilters for dynamic updates on larger screens.
    }

    function applyFilters() {
        let filtered = allProducts.filter(p => p.gender === GENDER_FILTER); // Keep 'Men' filter applied

        const categorySelect = document.getElementById('category');
        const sortSelect = document.getElementById('sort');
        const columnsSelect = document.getElementById('columns');

        if (categorySelect && categorySelect.value !== 'All') {
            filtered = filtered.filter(p => p.category === categorySelect.value);
        }
        
        if (sortSelect) {
            const sort = sortSelect.value;
            if (sort === 'Price: Low to High') filtered.sort((a, b) => a.price - b.price);
            if (sort === 'Price: High to Low') filtered.sort((a, b) => b.price - a.price);
            if (sort === 'Newest') filtered.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
        }
        
        // Re-render products
        renderProducts(filtered, 'productsGrid');
        
        // Update grid columns style separately, only if screen is desktop/tablet (i.e., > 767px)
        // For screens <= 767px, the media query in CSS will enforce 2 columns.
        if (columnsSelect) {
            const grid = document.getElementById('productsGrid');
            if (grid && window.innerWidth > 767) {
                // Adjust minmax for better responsiveness based on column count
                // The original logic is kept for screens larger than mobile
                const minWidth = columnsSelect.value === '4' ? '200px' : columnsSelect.value === '3' ? '250px' : 'minmax(300px, 1fr)';
                grid.style.gridTemplateColumns = `repeat(auto-fill, ${minWidth})`;
            }
        }
    }

    // --- Hero Animation (Enhanced) ---
    function animateHero() {
        const hero = document.getElementById('pageHero');
        if (!hero) return;

        const titleWords = hero.querySelectorAll('h1 span');
        const bottle = document.getElementById('heroBottle');
        
        // Initial state for GSAP timeline
        gsap.set(titleWords, { y: 30, opacity: 0 });
        gsap.set(hero.querySelector('p'), { y: 20, opacity: 0 });
        gsap.set(hero.querySelector('.hero-cta'), { scale: 0.8, opacity: 0 });
        gsap.set(bottle, { x: 50, opacity: 0, rotationZ: 5 });

        const tl = gsap.timeline({ defaults: { ease: "power3.out" } });

        // 1. Staggered Title Animation
        tl.to(titleWords, { y: 0, opacity: 1, duration: 0.6, stagger: 0.1, delay: 0.2 })
          // 2. Paragraph and CTA
          .to(hero.querySelector('p'), { y: 0, opacity: 1, duration: 0.7 }, "-=0.5")
          .to(hero.querySelector('.hero-cta'), { scale: 1, opacity: 1, duration: 0.5 }, "-=0.4")
          // 3. Bottle entrance and perpetual float
          .to(bottle, { x: 0, opacity: 1, rotationZ: 0, duration: 1.0, ease: "bounce.out" }, "-=0.7")
          .to(bottle, { y: 10, repeat: -1, yoyo: true, duration: 3, ease: "sine.inout" }, "-=0.2"); 
          
        // 4. Particle Generation and Animation
        createParticles();
        animateParticles();
        
        // 5. 3D Tilt Effect on Mouse Move (Desktop Only)
        if (window.innerWidth > 900) {
            document.addEventListener('mousemove', (e) => {
                const rect = hero.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                const moveX = (e.clientX - centerX) / centerX; 
                const moveY = (e.clientY - centerY) / centerY;
                
                // Tilt the entire hero section slightly
                gsap.to(hero, {
                    rotationY: moveX * 5, 
                    rotationX: moveY * 5 * -1,
                    ease: "power1.out",
                    duration: 0.5
                });

                // Move bottle element against the tilt for parallax feel
                gsap.to(bottle, {
                    x: moveX * 30, 
                    y: moveY * 30,
                    ease: "power1.out",
                    duration: 0.5
                });
            });
        }
    }

    // --- Particle Functions ---
    const NUM_PARTICLES = 30;

    function createParticles() {
        const container = document.getElementById('heroParticles');
        if (!container) return;
        
        for (let i = 0; i < NUM_PARTICLES; i++) {
            const particle = document.createElement('div');
            particle.className = 'hero-particle';
            // Random initial position (within the container)
            particle.style.left = `${Math.random() * 100}%`;
            particle.style.top = `${Math.random() * 100}%`;
            particle.style.width = particle.style.height = `${Math.random() * 3 + 1}px`;
            container.appendChild(particle);
        }
    }

    function animateParticles() {
        const particles = document.querySelectorAll('.hero-particle');
        particles.forEach((p, i) => {
            gsap.to(p, {
                opacity: 0.5 + Math.random() * 0.5,
                x: (Math.random() * 200 - 100) * (i % 2 === 0 ? 1 : -1), // horizontal drift
                y: (Math.random() * 100 - 50) * (i % 3 === 0 ? 1 : -1),  // vertical drift
                scale: 1.5,
                duration: 5 + Math.random() * 5,
                ease: "sine.inOut",
                repeat: -1,
                yoyo: true,
                delay: Math.random() * 5
            });
        });
    }


    // --- Initial Load ---
    document.addEventListener('DOMContentLoaded', () => {
        // Splitting title words for animation
        const titleH1 = document.querySelector('.page-hero h1');
        if(titleH1) {
            const text = titleH1.textContent;
            titleH1.innerHTML = text.split(/\s+/).map(word => `<span>${word}</span>`).join(' ');
        }
        
        // Fetch ALL products first
        fetch('https://ekamperfumes-production.up.railway.app/products')
            .then(response => response.json())
            .then(products => {
                allProducts = products;
                // Initialize filters, which will call renderProducts
                applyFilters();
            })
            .catch(error => console.error('Error fetching all products:', error));

        // Attach event listeners for filters
        const categorySelect = document.getElementById('category');
        const sortSelect = document.getElementById('sort');
        const columnsSelect = document.getElementById('columns');

        if (categorySelect) categorySelect.addEventListener('change', applyFilters);
        if (sortSelect) sortSelect.addEventListener('change', applyFilters);
        if (columnsSelect) columnsSelect.addEventListener('change', applyFilters); 
        
        // Hamburger Menu Logic
        const hamburger = document.getElementById('hamburger');
        const nav = document.querySelector('header nav');
        const navCloseBtn = document.getElementById('navCloseBtn');

        if (hamburger && nav && navCloseBtn) {
            hamburger.addEventListener('click', () => nav.classList.add('show'));
            navCloseBtn.addEventListener('click', () => nav.classList.remove('show'));
            nav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    nav.classList.remove('show');
                });
            });
        }
        
        // Start Hero Animation
        animateHero();
    });

</script>

</body>
</html>